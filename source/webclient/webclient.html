<html>
<head>
	<title>WebSocket Test</title>

	<style>
	.my-div-icon
	{
		width: 0;
	  height: 0;
	  border-left: 16px solid transparent;
	  border-right: 16px solid transparent;

	  border-bottom: 16px solid black;
	}
	</style>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>
</head>
<body onload="WebSocketTest()">
	<div id="mapid" style="width: 1000; height: 100%;"></div>
	<script>

	var greenIcon = L.icon({
	    iconUrl: 'images/icon.png',
	    shadowUrl: 'images/icon.png',

	    iconSize:     [64, 64], // size of the icon
	    shadowSize:   [64, 64], // size of the shadow
	    iconAnchor:   [32, 32], // point of the icon which will correspond to marker's location
	    shadowAnchor: [32, 32],  // the same for the shadow
	    popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
	});

	var mymap = L.map('mapid').setView([54.368957, 10.171281], 13);

	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(mymap);


	var popup = L.popup();

	function onMapClick(e) {
		popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at " + e.latlng.toString())
				.openOn(mymap);
	}

	mymap.on('click', onMapClick);

	L.marker([54.368957, 10.171281], {icon: greenIcon}).addTo(mymap);

	function WebSocketTest() {
		if ("WebSocket" in window) {
			alert("Connecting to Server");
			// Let us open a web socket
	    var ws = new WebSocket("ws://localhost:8000");
			ws.onopen = function() {
				// Web Socket is connected, send data using send()
	      ws.send("Message to send");
	      // alert("Message is sent...");
	    };
			ws.onmessage = function (evt) {
				var received_msg = evt.data;
				alert(received_msg);
			};
			ws.onclose = function() {
				// websocket is closed.
				alert("Connection is closed...");
	    };
		} else {
			// The browser doesn't support WebSocket
			alert("WebSocket NOT supported by your Browser!");
		}
	}
	</script>
	<div id="output" width=80 height=100></div>
</body>
</html>
